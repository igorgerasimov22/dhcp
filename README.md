# Ansible Playbook для настройки DHCP и PXE сервера

Этот Ansible playbook предназначен для автоматизации настройки DHCP и PXE сервера с использованием `dnsmasq` и `apache2`. Он выполняет все необходимые шаги для настройки сервера, включая загрузку необходимых файлов и конфигурацию службы.

## Содержание

- [Требования](#требования)
- [Структура Playbook](#структура-playbook)
- [Установка](#установка)
- [Использование](#использование)

## Требования

Перед использованием этого playbook убедитесь, что у вас установлены следующие компоненты:

- **Ansible**: Убедитесь, что Ansible установлен на вашем управляющем узле.
- **Целевые серверы**: Убедитесь, что целевые серверы имеют доступ к интернету для загрузки ISO-образов и других файлов.
- **SSH доступ**: Убедитесь, что у вас есть SSH доступ к целевым серверам и необходимы права для выполнения команд с повышенными привилегиями.

## Структура Playbook

Playbook выполняет следующие задачи:

1. Остановка и отключение UFW (брандмауэр).
2. Обновление кэша пакетов и установка `dnsmasq`.
3. Копирование конфигурационного файла PXE.
4. Создание папки для TFTP.
5. Загрузка необходимых файлов для сетевой установки.
6. Распаковка загруженного архива.
7. Установка `apache2` для предоставления доступа к образам.
8. Создание папки для ISO-образов.
9. Загрузка ISO-образа.
10. Копирование конфигурации Apache.
11. Активация конфигурации Apache.
12. Копирование образа конфигурации PXE.
13. Создание папки для kickstart и копирование пользовательских данных.

## Установка

Чтобы установить необходимые зависимости, выполните следующую команду:

```bash
sudo apt update
sudo apt install ansible
```

## Использование
Для запуска playbook выполните следующую команду, заменив your_inventory_file на путь к вашему инвентарному файлу:
```bash
ansible-playbook your_playbook.yml -i your_inventory_file --ask-become-pass
```